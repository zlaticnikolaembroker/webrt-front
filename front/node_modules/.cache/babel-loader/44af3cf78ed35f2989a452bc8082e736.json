{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport { createURLDescriptor, joinPaths, modifyTrailingSlash } from 'navi';\nimport { HashScrollContext, scrollToHash } from './HashScroll';\nimport { NaviContext } from './NaviContext';\n\nfunction isExternalHref(href) {\n  // If this is an external link, return undefined so that the native\n  // response will be used.\n  return !href || typeof href === 'string' && (href.indexOf('://') !== -1 || href.indexOf('mailto:') === 0);\n}\n\nfunction getLinkURL(href, routeURL) {\n  if (!isExternalHref(href)) {\n    // Resolve relative to the current \"directory\"\n    if (routeURL && typeof href === 'string') {\n      href = href[0] === '/' ? href : joinPaths('/', routeURL.pathname, href);\n    }\n\n    return createURLDescriptor(href);\n  }\n}\n/**\n * Returns a boolean that indicates whether the user is currently\n * viewing the specified href.\n * @param href\n * @param options.exact If false, will match any URL underneath this href\n * @param options.loading If true, will match even if the route is currently loading\n */\n\n\nexport var useActive = function (href, _a) {\n  var _b = _a === void 0 ? {} : _a,\n      _c = _b.exact,\n      exact = _c === void 0 ? true : _c,\n      _d = _b.loading,\n      loading = _d === void 0 ? false : _d;\n\n  var context = React.useContext(NaviContext);\n  var route = loading ? context.busyRoute || context.steadyRoute : context.steadyRoute || context.busyRoute;\n  var routeURL = route && route.url;\n  var linkURL = getLinkURL(href, routeURL);\n  return !!(linkURL && routeURL && (exact ? linkURL.pathname === routeURL.pathname : modifyTrailingSlash(routeURL.pathname, 'add').indexOf(linkURL.pathname) === 0));\n};\nexport var useLinkProps = function (_a) {\n  var disabled = _a.disabled,\n      hashScrollBehavior = _a.hashScrollBehavior,\n      href = _a.href,\n      prefetch = _a.prefetch,\n      state = _a.state,\n      onClick = _a.onClick,\n      onMouseEnter = _a.onMouseEnter;\n\n  var _b, _c;\n\n  if (prefetch && state) {\n    prefetch = false;\n\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn(\"Warning: A <Link> component received both \\\"prefetch\\\" and \\\"state\\\" \" + \"props, but links with state cannot be prefetched. Skipping prefetch.\");\n    }\n  }\n\n  if (prefetch === true) {\n    prefetch = 'mount';\n\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn(\"Warning: A <Link> component received a \\\"prefetch\\\" value of \\\"true\\\". \" + \"This value is no longer supported - please set it to \\\"mount\\\" instead.\");\n    }\n  } // Prefetch on hover by default.\n\n\n  if (prefetch === undefined) {\n    prefetch = 'hover';\n  }\n\n  var hashScrollBehaviorFromContext = React.useContext(HashScrollContext);\n  var context = React.useContext(NaviContext);\n  var navigation = context.navigation;\n\n  if (hashScrollBehavior === undefined) {\n    hashScrollBehavior = hashScrollBehaviorFromContext;\n  }\n\n  var route = context.steadyRoute || context.busyRoute;\n  var routeURL = React.useMemo(function () {\n    return route && route.url;\n  }, [(_b = route) === null || _b === void 0 ? void 0 : _b.url.href]);\n  var linkURL = getLinkURL(href, routeURL);\n\n  if (!isExternalHref(href)) {\n    var resolvedHref = href; // Resolve relative to the current \"directory\"\n\n    if (routeURL && typeof href === 'string') {\n      resolvedHref = href[0] === '/' ? href : joinPaths('/', routeURL.pathname, href);\n    }\n\n    linkURL = createURLDescriptor(resolvedHref);\n  } // We need a URL descriptor that stays referentially equal so that we don't\n  // trigger prefetches more than we'd like.\n\n\n  var memoizedLinkURL = React.useMemo(function () {\n    return linkURL;\n  }, [(_c = linkURL) === null || _c === void 0 ? void 0 : _c.href]);\n  var doPrefetch = React.useMemo(function () {\n    var hasPrefetched = false;\n    return function () {\n      if (!hasPrefetched && memoizedLinkURL && memoizedLinkURL.pathname && navigation) {\n        hasPrefetched = true;\n        navigation.prefetch(memoizedLinkURL).catch(function (e) {\n          console.warn(\"A <Link> tried to prefetch \\\"\" + memoizedLinkURL.pathname + \"\\\", but the \" + \"router was unable to fetch this path.\");\n        });\n      }\n    };\n  }, [memoizedLinkURL, navigation]); // Prefetch on mount if required, or if `prefetch` becomes `true`.\n\n  React.useEffect(function () {\n    if (prefetch === 'mount') {\n      doPrefetch();\n    }\n  }, [prefetch, doPrefetch]);\n  var handleMouseEnter = React.useCallback(function (event) {\n    if (prefetch === 'hover') {\n      if (onMouseEnter) {\n        onMouseEnter(event);\n      }\n\n      if (disabled) {\n        event.preventDefault();\n        return;\n      }\n\n      if (!event.defaultPrevented) {\n        doPrefetch();\n      }\n    }\n  }, [disabled, doPrefetch, onMouseEnter, prefetch]);\n  var handleClick = React.useCallback(function (event) {\n    // Let the browser handle the event directly if:\n    // - The user used the middle/right mouse button\n    // - The user was holding a modifier key\n    // - A `target` property is set (which may cause the browser to open the\n    //   link in another tab)\n    if (event.button === 0 && !(event.altKey || event.ctrlKey || event.metaKey || event.shiftKey)) {\n      if (disabled) {\n        event.preventDefault();\n        return;\n      }\n\n      if (onClick) {\n        onClick(event);\n      } // Sanity check\n\n\n      if (!routeURL) {\n        return;\n      }\n\n      if (!event.defaultPrevented && linkURL) {\n        event.preventDefault();\n        var isSamePathname = modifyTrailingSlash(linkURL.pathname, 'remove') === modifyTrailingSlash(routeURL.pathname, 'remove');\n        navigation.navigate(linkURL, state ? {\n          state: state\n        } : undefined);\n\n        if ((isSamePathname || linkURL.pathname === '') && linkURL.hash === routeURL.hash && linkURL.hash) {\n          scrollToHash(routeURL.hash, hashScrollBehavior);\n        }\n      }\n    }\n  }, [disabled, onClick, linkURL && linkURL.href, routeURL && routeURL.href]);\n  return {\n    onClick: handleClick,\n    onMouseEnter: handleMouseEnter,\n    href: linkURL ? linkURL.href : href\n  };\n}; // Need to include this type definition, as the automatically generated one\n// is incompatible with some versions of the react typings.\n\nexport var Link = React.forwardRef(function (props, anchorRef) {\n  var active = props.active,\n      _a = props.activeClassName,\n      activeClassName = _a === void 0 ? '' : _a,\n      _b = props.activeStyle,\n      activeStyle = _b === void 0 ? {} : _b,\n      _c = props.className,\n      className = _c === void 0 ? '' : _c,\n      disabled = props.disabled,\n      exact = props.exact,\n      hashScrollBehavior = props.hashScrollBehavior,\n      hrefProp = props.href,\n      onClickProp = props.onClick,\n      onMouseEnterProp = props.onMouseEnter,\n      prefetch = props.prefetch,\n      state = props.state,\n      _d = props.style,\n      style = _d === void 0 ? {} : _d,\n      rest = __rest(props, [\"active\", \"activeClassName\", \"activeStyle\", \"className\", \"disabled\", \"exact\", \"hashScrollBehavior\", \"href\", \"onClick\", \"onMouseEnter\", \"prefetch\", \"state\", \"style\"]);\n\n  var _e = useLinkProps({\n    hashScrollBehavior: hashScrollBehavior,\n    href: hrefProp,\n    onClick: onClickProp,\n    onMouseEnter: onMouseEnterProp,\n    prefetch: prefetch,\n    state: state\n  }),\n      onClick = _e.onClick,\n      onMouseEnter = _e.onMouseEnter,\n      linkProps = __rest(_e, [\"onClick\", \"onMouseEnter\"]);\n\n  var actualActive = useActive(linkProps.href, {\n    exact: !!exact\n  });\n\n  if (active === undefined) {\n    active = actualActive;\n  }\n\n  return React.createElement(\"a\", __assign({\n    ref: anchorRef,\n    className: className + \" \" + (active ? activeClassName : ''),\n    style: __assign(__assign({}, style), active ? activeStyle : {})\n  }, rest, linkProps, {\n    // Don't handle events on links with a `target` prop.\n    onClick: props.target ? onClickProp : onClick,\n    onMouseEnter: props.target ? onMouseEnterProp : onMouseEnter\n  }));\n});","map":{"version":3,"sources":["../../src/Link.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as React from 'react';\nimport { createURLDescriptor, joinPaths, modifyTrailingSlash, } from 'navi';\nimport { HashScrollContext, scrollToHash, } from './HashScroll';\nimport { NaviContext } from './NaviContext';\nfunction isExternalHref(href) {\n    // If this is an external link, return undefined so that the native\n    // response will be used.\n    return (!href ||\n        (typeof href === 'string' &&\n            (href.indexOf('://') !== -1 || href.indexOf('mailto:') === 0)));\n}\nfunction getLinkURL(href, routeURL) {\n    if (!isExternalHref(href)) {\n        // Resolve relative to the current \"directory\"\n        if (routeURL && typeof href === 'string') {\n            href = href[0] === '/' ? href : joinPaths('/', routeURL.pathname, href);\n        }\n        return createURLDescriptor(href);\n    }\n}\n/**\n * Returns a boolean that indicates whether the user is currently\n * viewing the specified href.\n * @param href\n * @param options.exact If false, will match any URL underneath this href\n * @param options.loading If true, will match even if the route is currently loading\n */\nexport var useActive = function (href, _a) {\n    var _b = _a === void 0 ? {} : _a, _c = _b.exact, exact = _c === void 0 ? true : _c, _d = _b.loading, loading = _d === void 0 ? false : _d;\n    var context = React.useContext(NaviContext);\n    var route = loading\n        ? context.busyRoute || context.steadyRoute\n        : context.steadyRoute || context.busyRoute;\n    var routeURL = route && route.url;\n    var linkURL = getLinkURL(href, routeURL);\n    return !!(linkURL &&\n        routeURL &&\n        (exact\n            ? linkURL.pathname === routeURL.pathname\n            : modifyTrailingSlash(routeURL.pathname, 'add').indexOf(linkURL.pathname) === 0));\n};\nexport var useLinkProps = function (_a) {\n    var disabled = _a.disabled, hashScrollBehavior = _a.hashScrollBehavior, href = _a.href, prefetch = _a.prefetch, state = _a.state, onClick = _a.onClick, onMouseEnter = _a.onMouseEnter;\n    var _b, _c;\n    if (prefetch && state) {\n        prefetch = false;\n        if (process.env.NODE_ENV !== 'production') {\n            console.warn(\"Warning: A <Link> component received both \\\"prefetch\\\" and \\\"state\\\" \" +\n                \"props, but links with state cannot be prefetched. Skipping prefetch.\");\n        }\n    }\n    if (prefetch === true) {\n        prefetch = 'mount';\n        if (process.env.NODE_ENV !== 'production') {\n            console.warn(\"Warning: A <Link> component received a \\\"prefetch\\\" value of \\\"true\\\". \" +\n                \"This value is no longer supported - please set it to \\\"mount\\\" instead.\");\n        }\n    }\n    // Prefetch on hover by default.\n    if (prefetch === undefined) {\n        prefetch = 'hover';\n    }\n    var hashScrollBehaviorFromContext = React.useContext(HashScrollContext);\n    var context = React.useContext(NaviContext);\n    var navigation = context.navigation;\n    if (hashScrollBehavior === undefined) {\n        hashScrollBehavior = hashScrollBehaviorFromContext;\n    }\n    var route = context.steadyRoute || context.busyRoute;\n    var routeURL = React.useMemo(function () { return route && route.url; }, [(_b = route) === null || _b === void 0 ? void 0 : _b.url.href]);\n    var linkURL = getLinkURL(href, routeURL);\n    if (!isExternalHref(href)) {\n        var resolvedHref = href;\n        // Resolve relative to the current \"directory\"\n        if (routeURL && typeof href === 'string') {\n            resolvedHref =\n                href[0] === '/' ? href : joinPaths('/', routeURL.pathname, href);\n        }\n        linkURL = createURLDescriptor(resolvedHref);\n    }\n    // We need a URL descriptor that stays referentially equal so that we don't\n    // trigger prefetches more than we'd like.\n    var memoizedLinkURL = React.useMemo(function () { return linkURL; }, [(_c = linkURL) === null || _c === void 0 ? void 0 : _c.href]);\n    var doPrefetch = React.useMemo(function () {\n        var hasPrefetched = false;\n        return function () {\n            if (!hasPrefetched &&\n                memoizedLinkURL &&\n                memoizedLinkURL.pathname &&\n                navigation) {\n                hasPrefetched = true;\n                navigation.prefetch(memoizedLinkURL).catch(function (e) {\n                    console.warn(\"A <Link> tried to prefetch \\\"\" + memoizedLinkURL.pathname + \"\\\", but the \" + \"router was unable to fetch this path.\");\n                });\n            }\n        };\n    }, [memoizedLinkURL, navigation]);\n    // Prefetch on mount if required, or if `prefetch` becomes `true`.\n    React.useEffect(function () {\n        if (prefetch === 'mount') {\n            doPrefetch();\n        }\n    }, [prefetch, doPrefetch]);\n    var handleMouseEnter = React.useCallback(function (event) {\n        if (prefetch === 'hover') {\n            if (onMouseEnter) {\n                onMouseEnter(event);\n            }\n            if (disabled) {\n                event.preventDefault();\n                return;\n            }\n            if (!event.defaultPrevented) {\n                doPrefetch();\n            }\n        }\n    }, [disabled, doPrefetch, onMouseEnter, prefetch]);\n    var handleClick = React.useCallback(function (event) {\n        // Let the browser handle the event directly if:\n        // - The user used the middle/right mouse button\n        // - The user was holding a modifier key\n        // - A `target` property is set (which may cause the browser to open the\n        //   link in another tab)\n        if (event.button === 0 &&\n            !(event.altKey || event.ctrlKey || event.metaKey || event.shiftKey)) {\n            if (disabled) {\n                event.preventDefault();\n                return;\n            }\n            if (onClick) {\n                onClick(event);\n            }\n            // Sanity check\n            if (!routeURL) {\n                return;\n            }\n            if (!event.defaultPrevented && linkURL) {\n                event.preventDefault();\n                var isSamePathname = modifyTrailingSlash(linkURL.pathname, 'remove') ===\n                    modifyTrailingSlash(routeURL.pathname, 'remove');\n                navigation.navigate(linkURL, state ? { state: state } : undefined);\n                if ((isSamePathname || linkURL.pathname === '') &&\n                    linkURL.hash === routeURL.hash &&\n                    linkURL.hash) {\n                    scrollToHash(routeURL.hash, hashScrollBehavior);\n                }\n            }\n        }\n    }, [disabled, onClick, linkURL && linkURL.href, routeURL && routeURL.href]);\n    return {\n        onClick: handleClick,\n        onMouseEnter: handleMouseEnter,\n        href: linkURL ? linkURL.href : href,\n    };\n};\n// Need to include this type definition, as the automatically generated one\n// is incompatible with some versions of the react typings.\nexport var Link = React.forwardRef(function (props, anchorRef) {\n    var active = props.active, _a = props.activeClassName, activeClassName = _a === void 0 ? '' : _a, _b = props.activeStyle, activeStyle = _b === void 0 ? {} : _b, _c = props.className, className = _c === void 0 ? '' : _c, disabled = props.disabled, exact = props.exact, hashScrollBehavior = props.hashScrollBehavior, hrefProp = props.href, onClickProp = props.onClick, onMouseEnterProp = props.onMouseEnter, prefetch = props.prefetch, state = props.state, _d = props.style, style = _d === void 0 ? {} : _d, rest = __rest(props, [\"active\", \"activeClassName\", \"activeStyle\", \"className\", \"disabled\", \"exact\", \"hashScrollBehavior\", \"href\", \"onClick\", \"onMouseEnter\", \"prefetch\", \"state\", \"style\"]);\n    var _e = useLinkProps({\n        hashScrollBehavior: hashScrollBehavior,\n        href: hrefProp,\n        onClick: onClickProp,\n        onMouseEnter: onMouseEnterProp,\n        prefetch: prefetch,\n        state: state,\n    }), onClick = _e.onClick, onMouseEnter = _e.onMouseEnter, linkProps = __rest(_e, [\"onClick\", \"onMouseEnter\"]);\n    var actualActive = useActive(linkProps.href, { exact: !!exact });\n    if (active === undefined) {\n        active = actualActive;\n    }\n    return (React.createElement(\"a\", __assign({ ref: anchorRef, className: className + \" \" + (active ? activeClassName : ''), style: __assign(__assign({}, style), (active ? activeStyle : {})) }, rest, linkProps, { \n        // Don't handle events on links with a `target` prop.\n        onClick: props.target ? onClickProp : onClick, onMouseEnter: props.target ? onMouseEnterProp : onMouseEnter })));\n});\n//# sourceMappingURL=Link.js.map"]},"metadata":{},"sourceType":"module"}